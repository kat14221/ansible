
---
# Role: user-security-dashboard
# Genera evidencias de usuarios, permisos y pol√≠ticas en Linux y Windows.

- name: Ensure local evidence base directory exists
  delegate_to: localhost
  file:
    path: "{{ (playbook_dir | dirname) + '/evidence/gestion-seguridad' }}"
    state: directory
    mode: '0750'
  run_once: true

- name: Ensure host evidence directory exists
  delegate_to: localhost
  file:
    path: "{{ (playbook_dir | dirname) + '/evidence/gestion-seguridad/' + inventory_hostname }}"
    state: directory
    mode: '0750'

- name: Include Linux workflow
  import_tasks: linux.yml
  when: ansible_os_family != 'Windows'

# Windows deshabilitado temporalmente
# - name: Include Windows workflow  
#   import_tasks: windows.yml
#   when: ansible_os_family == 'Windows'
