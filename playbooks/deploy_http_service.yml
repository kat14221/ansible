---
# Playbook: Desplegar Servicio HTTP y FTP
# Descripción: Apache HTTP Server + vsftpd en IPv6

- name: Desplegar Servicios HTTP y FTP en Debian Router
  hosts: debian-router
  become: yes
  gather_facts: yes
  tasks:
    - name: Incluir role debian-services
      include_role:
        name: debian-services

    - name: Probar acceso HTTP local
      uri:
        url: "http://localhost"
        return_content: yes
      register: http_test
      ignore_errors: yes

    - name: Mostrar resumen
      debug:
        msg:
          - "================================================"
          - "  Servicios HTTP y FTP Desplegados"
          - "================================================"
          - ""
          - "HTTP: http://[2025:db8:101::1]"
          - "FTP: ftp://2025:db8:101::1"
          - "Estado HTTP: {{ 'OK' if http_test.status | default(0) == 200 else 'Error' }}"
          - "================================================"
