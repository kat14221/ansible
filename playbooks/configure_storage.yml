---
# Playbook: ConfiguraciÃ³n de GestiÃ³n de Almacenamiento
# DescripciÃ³n: Configura gestiÃ³n avanzada de almacenamiento y sistemas de archivos

- name: Configurar GestiÃ³n de Almacenamiento
  hosts: debian_router
  become: yes
  gather_facts: yes
  
  tasks:
    - name: Aplicar rol de gestiÃ³n de almacenamiento
      include_role:
        name: storage-management
      tags: storage

- name: Resumen de GestiÃ³n de Almacenamiento
  hosts: localhost
  gather_facts: no
  tasks:
    - name: Mostrar resumen completo
      debug:
        msg:
          - "=========================================="
          - "âœ… GESTIÃ“N DE ALMACENAMIENTO CONFIGURADA"
          - "=========================================="
          - ""
          - "ğŸ“ ESTRUCTURA DE DIRECTORIOS:"
          - "   /backup/configs - Backups automÃ¡ticos"
          - "   /srv/ftp - Archivos FTP"
          - "   /srv/www - Archivos web"
          - "   /srv/alumnos - Espacio para alumnos"
          - "   /srv/profesores - Espacio para profesores"
          - ""
          - "ğŸ’¾ CUOTAS DE DISCO:"
          - "   Alumnos: 500MB soft / 600MB hard"
          - "   Profesores: 1GB soft / 1.2GB hard"
          - "   Grupo alumnos: 2GB soft / 2.5GB hard"
          - "   Grupo profesores: 5GB soft / 6GB hard"
          - ""
          - "ğŸ“Š MONITOREO:"
          - "   â€¢ VerificaciÃ³n cada hora"
          - "   â€¢ Alertas si uso >80%"
          - "   â€¢ IdentificaciÃ³n de archivos grandes"
          - ""
          - "ğŸ§¹ LIMPIEZA AUTOMÃTICA:"
          - "   â€¢ Archivos temporales >7 dÃ­as"
          - "   â€¢ Cache de paquetes"
          - "   â€¢ CompresiÃ³n de logs antiguos"
          - ""
          - "ğŸ“ SCRIPTS DISPONIBLES:"
          - "   sudo /usr/local/bin/analyze_disk_usage.sh"
          - "   sudo /usr/local/bin/monitor_disk_space.sh"
          - "   sudo /usr/local/bin/cleanup_temp.sh"
          - ""
          - "ğŸ“Š VERIFICACIÃ“N:"
          - "   ssh ansible@172.17.25.126"
          - "   df -h"
          - "   sudo repquota -a"
          - "   sudo tail -f /var/log/storage/*.log"
          - ""
          - "ğŸ¯ NIVEL ALCANZADO: â­â­â­â­â­"
          - "   'AdministraciÃ³n avanzada, uso eficiente de espacio'"
          - "=========================================="
